<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>API文档</title></head>
<body><h1>API文档</h1>
<!-- TOC -->
<ul>
<li><p><a href='#api文档'>API文档</a></p>
<ul>
<li><p><a href='#usermanagement'><strong>UserManagement</strong></a></p>
<ul>
<li><a href='#token的使用方式'>token的使用方式</a></li>
<li><a href='#usersignup'>/user/signup</a></li>
<li><a href='#userlogin'>/user/login</a></li>
<li><a href='#usertokentest'>/user/token_test</a></li>

</ul>
</li>

</ul>
</li>

</ul>
<!-- /TOC -->
<div>[TOC]</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>UserManagement</h2>
<p>此模块主要用于进行用户的登录、注册、以及token的验证工作</p>
<p><strong>现阶段用户名以及密码传输均采用明文传输，后续会考虑使用rsa加密传输</strong></p>
<h3>token的使用方式</h3>
<p>拿到token后，使用方法为在http请求的header中添加一项(此方法手动构建header，可以考虑其他方法)</p>
<pre><code>{
    &quot;Authorization&quot;: &quot;basic &quot;+ base64(token+&quot;:&quot;) # 注意basic后有一个空格，token后面需要添加一个冒号再做base64加密
}
</code></pre>
<p>如果token验证通过，服务器返回</p>
<pre><code>{
    state: &quot;success&quot;
}
</code></pre>
<p>否则，服务器会返回状态码401(UNAUTHORIZED)，表明失效</p>
<p>对于后端任意函数，如果要求只有登录状态才能使用，须在函数定义前加</p>
<pre><code>@auth.login_required
def example():
    # do something
</code></pre>
<p>这样就会自动使用上述token验证机制</p>
<p>&nbsp;</p>
<h3>/user/signup</h3>
<p>此路径用于进行用户注册</p>
<p>支持Get方法和Post方法</p>
<p>输入：</p>
<pre><code>{
    username: String, # 用户名
    password: String  # 密码
}
</code></pre>
<p>输出：</p>
<p>成功时：</p>
<pre><code>{
    state: &quot;success&quot;
}
</code></pre>
<p>失败时：</p>
<pre><code>{
    state: &quot;failed&quot;,
    description: String # 给出一个错误原因
}
</code></pre>
<h3>/user/login</h3>
<p>此路径用于进行用户登录</p>
<p>支持Get方法和Post方法</p>
<p>输入：</p>
<pre><code>{
    username: String, # 用户名
    password: String  # 密码
}
</code></pre>
<p>输出：</p>
<p>成功时：</p>
<pre><code>{
    state: &quot;success&quot;,
    UserId: String, # 用户ID，请务必在本地保存，后续需要使用
    token: String # 后续操作使用的token
}
</code></pre>
<p>失败时：</p>
<pre><code>{
    state: &quot;failed&quot;,
    description: String # 给出一个错误原因
}
</code></pre>
<h3>/user/token_test</h3>
<p>用于验证token是否还有效。如果token无效需要重新登录获取token</p>
<p>&nbsp;</p>
<h2>UserFavor</h2>
<blockquote><p>用于用户收藏文章、用户订阅新RSS链接</p>
</blockquote>
<h3>/userfavor/addFavorArticle</h3>
<blockquote><p>用户添加收藏文章</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userId&#39;:&#39;test_user1&#39;, // user标识符，用于唯一确定用户的字符串
    &#39;articleId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39; // 文章id，用字符串表示数字，用于唯一确定文章，对应文章数据库中的id
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;: &#39;success&#39;, //成功状态
    &#39;moreMsg&#39;: [{&#39;_Id&#39;: 1, &#39;articleId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;}], // 表示该添加内容在数据库中的项
    &#39;description&#39;: &#39;success&#39;, // 成功描述
} 
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<h3>/userfavor/getFavorArticle</h3>
<blockquote><p>用户获取已收藏的文章</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // user标识符，用于唯一确定用户的字符串
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;rst&#39;: [{&#39;_Id&#39;: 1, 
             &#39;articleId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, 
             &#39;userId&#39;: &#39;b7451baa-3eda-11eb-a877-00163e0f2f21&#39;,
             &#39;content&#39;: &#39;  人民网北京12月15日电 （赵竹青）记者从国家航天局获悉，截至12月14日21时，“天问一号”探测器已在轨飞行144天，飞行里程约3.6亿公里，距离地球超过1亿公里，距离火星约1200万公里，飞行状态良好。   受天体运动规律影响，火星与地球距离在0.5亿公里至4亿多公里周期性发生变化。“天问一号”探测器到达火星附近时，距离地球约1.9亿公里。   “天问一号”自7月23日发射以来，已成功完成地月合照、探测器“自拍”、三次中途修正、一次深空机动、载荷自检等工作。后续，还将进行数次轨道修正，预计明年2月中旬接近火星后，实施“刹车”制动进入环火轨道，为火星着陆作准备。&#39;, 
           &#39;keywords&#39;: {&#39;0&#39;: &#39;火星&#39;, &#39;1&#39;: &#39;距离&#39;, &#39;2&#39;: &#39;探测器&#39;, &#39;3&#39;: &#39;地球&#39;, &#39;4&#39;: &#39;深空&#39;, &#39;5&#39;: &#39;机动&#39;, &#39;6&#39;: &#39;天问&#39;, &#39;7&#39;: &#39;附近&#39;, &#39;8&#39;: &#39;修正&#39;, &#39;9&#39;: &#39;环火&#39;, &#39;10&#39;: &#39;赵竹青&#39;, &#39;11&#39;: &#39;北京&#39;, &#39;12&#39;: &#39;记者&#39;, &#39;13&#39;: &#39;人民网&#39;, &#39;14&#39;: &#39;国家航天局&#39;, &#39;15&#39;: &#39;轨道&#39;, &#39;16&#39;: &#39;规律&#39;, &#39;17&#39;: &#39;载荷&#39;, &#39;18&#39;: &#39;天体&#39;, &#39;19&#39;: &#39;周期性&#39;}, 
           &#39;title&#39;: &#39;“天问一号”距地球超1亿公里 预计明年2月抵达火星&#39;,
            &#39;imgLinks&#39;:[&#39;https://cn.bing.com/th?id=OHR.IbonPlan_ZH-CN8564017247_1920x1080.jpg&amp;amp;rf=LaDigue_1920x1080.jpg&amp;amp;pid=hp&#39;,
    &#39;https://cn.bing.com/th?id=OHR.BarnettsDemesne_ZH-CN8484261440_1920x1080.jpg&amp;amp;rf=LaDigue_1920x1080.jpg&amp;amp;pid=hp&#39;] // 图片链接列表，包含所有图片，若新闻没有图片则返回默认图片
            ,&#39;raw_html&#39;:&#39;里面是未处理的html&#39;
          }], // 列表，每一项表示一条数据库记录
  &#39;state&#39;: &#39;success&#39; // 成功状态
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<h3>/userfavor/removeFavorArticle</h3>
<blockquote><p>用户移除一篇收藏文章</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // user标识符，用于唯一确定用户的字符串
    &#39;articleId&#39;:&#39;1&#39; // 文章id，用字符串表示数字，用于唯一确定文章，对应文章数据库中的id
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;: &#39;success&#39;, //成功状态
    &#39;description&#39;: &#39;success&#39;, // 成功描述
} 
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<p>&nbsp;</p>
<h3>/userfavor/addFavorRSS</h3>
<blockquote><p>用户订阅一个新RSS</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // user标识符，用于唯一确定用户的字符串
    &#39;RSSId&#39;:&#39;1&#39; // RSSid，用字符串表示数字，用于唯一确定RSS，对应RSS数据库中的id
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;: &#39;success&#39;, //成功状态
    &#39;moreMsg&#39;: [{&#39;_Id&#39;: 9, &#39;rssId&#39;: 1, &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;}], // 表示该添加内容在数据库中的项
    &#39;description&#39;: &#39;success&#39;, // 成功描述
} 
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<h3>/userfavor/getFavorRSS</h3>
<blockquote><p>用户获取所有已订阅的RSS链接的id</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // user标识符，用于唯一确定用户的字符串
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;rst&#39;: [{&#39;_Id&#39;: 1, &#39;rssId&#39;: 1, &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;},
            {&#39;_Id&#39;: 2, &#39;rssId&#39;: 2, &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;},
            {&#39;_Id&#39;: 3, &#39;rssId&#39;: 5, &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;},
            {&#39;_Id&#39;: 4, &#39;rssId&#39;: 6, &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;},
          {&#39;_Id&#39;: 5, &#39;rssId&#39;: 7, &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;},
          {&#39;_Id&#39;: 6, &#39;rssId&#39;: 10, &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;}], // 数据库内容
  &#39;state&#39;: &#39;success&#39; // 成功状态
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<h3>/userfavor/getFavorRSSlinks</h3>
<blockquote><p>用户获取所有已订阅的RSS的标题和链接</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // user标识符，用于唯一确定用户的字符串
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;rst&#39;: [{&#39;_Id&#39;: 1, // 这个没用，或许可以用来排序
             &#39;rssId&#39;: 1, // 该rss的标识符
             &#39;rsslink&#39;: &#39;https://rss.injahow.cn/zhihu/people/activities/li-xi-mo-66&#39;,
             &#39;rsstitle&#39;: &#39;liximo66的知乎&#39;,
             &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;},
            {&#39;_Id&#39;: 2,
             &#39;rsslink&#39;: &#39;https://rss.injahow.cn/zhihu/hotlist&#39;,
             &#39;rsstitle&#39;: &#39;知乎热搜&#39;,
           &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;}
          ], // 数据库内记录
&#39;state&#39;: &#39;success&#39; // 成功状态
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<h3>/userfavor/removeFavorRSS</h3>
<blockquote><p>用户取消订阅一个RSS</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // 用户标识符
    &#39;RSSId&#39;:&#39;11&#39; // RSS标识符
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;description&#39;: &#39;success&#39;, 
    &#39;state&#39;: &#39;success&#39;
}  
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>rssdb</h2>
<blockquote><p>用于维护已公布的RSSlink数据库和用户提交请求数据库</p>
</blockquote>
<h3>/rssdb/getPendingMsg</h3>
<blockquote><p>管理员 获取所有用户已经提交的但尚未处理的申请</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>None
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;rst&#39;: [
       	 	{&#39;_Id&#39;: 1, // 该申请的id
             &#39;checkedByAdministrator&#39;: &#39;None&#39;, // 该项表示该记录被哪个管理员处理了，在该api中全为None
             &#39;rsslink&#39;: &#39;www.baid1u.com&#39;,
             &#39;rsstitle&#39;: &#39;baidu1&#39;,
             &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;}
    		], // 列表，每一项表示一个未处理的请求
    &#39;state&#39;: &#39;success&#39;}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<h3>/rssdb/addPendingMsg</h3>
<blockquote><p>用户提交一个新的RSS申请</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // 用户标识符
    &#39;rsstitle&#39;:&#39;baidu&#39;, // 新的RSS申请的标题
    &#39;rsslink&#39;:&#39;www.baidu.com&#39; // 新的RSS申请的链接
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;description&#39;: &#39;success&#39;, // 成功描述
    &#39;moreMsg&#39;: [{&#39;_Id&#39;: 1,
                 &#39;checkedByAdministrator&#39;: &#39;None&#39;,
                 &#39;rsslink&#39;: &#39;www.baid1u.com&#39;,
                 &#39;rsstitle&#39;: &#39;baidu1&#39;, 
                 &#39;userId&#39;: &#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;}], // 该申请在数据库中的项的具体信息
    &#39;state&#39;: &#39;success&#39; // 成功状态
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
<ul>
<li><p>其中有两种错误需要特殊处理：</p>
</li>
<li><pre><code class='language-json' lang='json'>// 表示已有的knownRSS数据库中已经有相同rsslink的记录了
{
    &#39;state&#39;:&#39;failed&#39;, &quot;description&quot;: &quot;first query existed with rsslink&quot;
}

// 表示已有的knownRSS数据库中已经有相同的rsstitle的记录了
{
    &#39;state&#39;:&#39;failed&#39;, &quot;description&quot;: &quot;first query existed with rsstitle&quot;
}
</code></pre>
</li>

</ul>
</li>

</ul>
</li>

</ul>
<p>&nbsp;</p>
<h3>/rssdb/approvePendingMsg</h3>
<blockquote><p>管理员 批准通过某条申请</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;administratorId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // 管理员id
    &#39;pendingMsg_id&#39;:11 // 该申请的id
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;description&#39;: &#39;success&#39;, // 成功描述
    &#39;moreMsg&#39;: [{&#39;rssId&#39;: 20,
                 &#39;rsslink&#39;: &#39;http://news.baidu.com/n?cmd=1&amp;class=civilnews&amp;tn=rss&#39;,
              	&#39;rsstitle&#39;: &#39;baidu&#39;}], //该项在knownRSS数据库中的具体项信息
    &#39;state&#39;: &#39;success&#39; // 成功状态
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
<ul>
<li><p>其中有两种错误需要特殊处理：</p>
</li>
<li><pre><code class='language-json' lang='json'>// 表示已有的knownRSS数据库中已经有相同rsslink的记录了
{
    &#39;state&#39;:&#39;failed&#39;, &quot;description&quot;: &quot;first query existed with rsslink&quot;
}

// 表示已有的knownRSS数据库中已经有相同的rsstitle的记录了
{
    &#39;state&#39;:&#39;failed&#39;, &quot;description&quot;: &quot;first query existed with rsstitle&quot;
}
</code></pre>
</li>

</ul>
</li>

</ul>
</li>

</ul>
<p>&nbsp;</p>
<h3>/rssdb/rejectPendingMsg</h3>
<blockquote><p>管理员 拒绝某个申请</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;administratorId&#39;:&#39;bd6f7f6d-0b56-4ed5-9501-b829d8e78d3e&#39;, // 管理员id
    &#39;pendingMsg_id&#39;:11 // 该申请的id
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;description&#39;: &#39;success&#39;, 
    &#39;state&#39;: &#39;success&#39;
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<p>&nbsp;</p>
<h3>/rssdb/getAllRSS</h3>
<blockquote><p>获取所有预制已保存的knownRSS</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>None
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;rst&#39;: [{&#39;rssId&#39;: 1,
             &#39;rsslink&#39;: &#39;https://rss.injahow.cn/zhihu/people/activities/li-xi-mo-66&#39;,
             &#39;rsstitle&#39;: &#39;liximo66的知乎&#39;},
            {&#39;rssId&#39;: 2,
             &#39;rsslink&#39;: &#39;https://rss.injahow.cn/zhihu/hotlist&#39;,
             &#39;rsstitle&#39;: &#39;知乎热榜&#39;}],
    &#39;state&#39;: &#39;success&#39;
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<p>&nbsp;</p>
<h3>/rssdb/addKnownRSS</h3>
<blockquote><p>注意：该api用于debug！！！</p>
<p>管理员 直接添加一个新的RSS</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;rsslink&#39;:&quot;https://rss.injahow.cn/zhihu/people/activities/li-xi-mo-66&quot;, // rss链接
    &#39;rsstitle&#39;:&quot;知乎liximo66&quot; // rss标题
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;description&#39;: &#39;success&#39;,  //成功描述
    &#39;moreMsg&#39;: [{&#39;rssId&#39;: 1, 
                 &#39;rsslink&#39;: &#39;https://rss.injahow.cn/zhihu/people/activities/li-xi-mo-66&#39;, 
                 &#39;rsstitle&#39;: &#39;zhihu/people/activities/li-xi-mo-66&#39;}],  // 在数据库中的具体信息
    &#39;state&#39;: &#39;success&#39; // 成功状态
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
<ul>
<li><p>其中有两种错误需要特殊处理：</p>
</li>
<li><pre><code class='language-json' lang='json'>// 表示已有的knownRSS数据库中已经有相同rsslink的记录了
{
    &#39;state&#39;:&#39;failed&#39;, &quot;description&quot;: &quot;first query existed with rsslink&quot;
}

// 表示已有的knownRSS数据库中已经有相同的rsstitle的记录了
{
    &#39;state&#39;:&#39;failed&#39;, &quot;description&quot;: &quot;first query existed with rsstitle&quot;
}
</code></pre>
</li>

</ul>
</li>

</ul>
</li>

</ul>
<p>&nbsp;</p>
<h3>/rssdb/removeKnownRSS</h3>
<blockquote><p>注意：该api用于debug！！！</p>
<p>管理员 直接删除一个已有的RSS</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;rssId&#39;:2 // rss标识符
}
</code></pre>
</li>
<li><p>输出：</p>
<ul>
<li><p>成功时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;description&#39;: &#39;success&#39;, 
    &#39;state&#39;: &#39;success&#39;
}
</code></pre>
</li>
<li><p>失败时：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;failed&#39;, // 失败状态
    &quot;description&quot;: &quot;second query failed with error: &quot; // 失败描述
}
</code></pre>
</li>

</ul>
</li>

</ul>
<h2>content</h2>
<blockquote><p>用于显示文章列表或搜索文章</p>
</blockquote>
<h3>/content/getArticles</h3>
<blockquote><p>给用户生成一个推荐文章列表；如果用户已有关注的源则从源获取新文章，否则获取一些默认文章</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;userid&#39;: &#39;be19d186-3e9f-11eb-a877-00163e0f2f21&#39;  //登录时返回的用户id，格式类似示例
}
</code></pre>
</li>
<li><p>输出：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;:&#39;success&#39;,
    &#39;article_list&#39;:{
        &#39;0&#39;:{
            &#39;title&#39;: &#39;文章名&#39;,
            &#39;article&#39;: &#39;文章正文&#39;,
            &#39;id&#39;: &#39;a7ae6a6b-c1d7-48b6-8914-6054dfd3ac3c&#39;, //文章id，格式类似示例
            &#39;keyword_num&#39;:20,
            &#39;keyword_list&#39;:{
                &#39;0&#39;: &#39;关键词1&#39;,
                &#39;1&#39;: &#39;关键词2&#39;,
                //...中间略
             	&#39;19&#39;: &#39;关键词20&#39;
            },
            &#39;imgLinks&#39;:[&#39;https://cn.bing.com/th?id=OHR.IbonPlan_ZH-CN8564017247_1920x1080.jpg&amp;amp;rf=LaDigue_1920x1080.jpg&amp;amp;pid=hp&#39;,
    &#39;https://cn.bing.com/th?id=OHR.BarnettsDemesne_ZH-CN8484261440_1920x1080.jpg&amp;amp;rf=LaDigue_1920x1080.jpg&amp;amp;pid=hp&#39;] // 图片链接列表，包含所有图片，若新闻没有图片则返回默认图片
            ,&#39;raw_html&#39;:&#39;里面是未处理的html&#39;
        },
        &#39;1&#39;:{
            &#39;title&#39;: &#39;文章名2&#39;,
            &#39;article&#39;: &#39;文章正文2&#39;,
            &#39;id&#39;: &#39;id2&#39;, 
            &#39;keyword_num&#39;:20,
            &#39;keyword_list&#39;:{
                &#39;0&#39;: &#39;关键词a&#39;,
                &#39;1&#39;: &#39;关键词b&#39;,
                //...中间略
             	&#39;19&#39;: &#39;关键词t&#39;
        },
            &#39;imgLinks&#39;:[&#39;https://cn.bing.com/th?id=OHR.IbonPlan_ZH-CN8564017247_1920x1080.jpg&amp;amp;rf=LaDigue_1920x1080.jpg&amp;amp;pid=hp&#39;,
    &#39;https://cn.bing.com/th?id=OHR.BarnettsDemesne_ZH-CN8484261440_1920x1080.jpg&amp;amp;rf=LaDigue_1920x1080.jpg&amp;amp;pid=hp&#39;] // 图片链接列表，包含所有图片，若新闻没有图片则返回默认图片
            ,&#39;raw_html&#39;:&#39;里面是未处理的html&#39;
    }
        //后略
}
</code></pre>
</li>

</ul>
<p>&nbsp;</p>
<h3>/content/search</h3>
<blockquote><p>用于关键词搜索文章；支持多关键词用空格分隔。</p>
</blockquote>
<ul>
<li><p>输入：</p>
<pre><code class='language-json' lang='json'>{
    &#39;searchword&#39;: &#39;我 爱 软件&#39; //准备搜索的关键词
}
</code></pre>
<p>&nbsp;</p>
</li>
<li><p>输出：</p>
<pre><code class='language-json' lang='json'>{
    &#39;state&#39;: &#39;success&#39;,
  &#39;result&#39;: {
        &#39;0&#39;: {
            &#39;article&#39;: &#39;文章内容&#39;,
            &#39;title&#39;: &#39;文章标题&#39;,
            &#39;id&#39;: &#39;文章id&#39;,
            &#39;keyword_num&#39;: 20,
            &#39;keyword_list&#39;:{
                &#39;0&#39;: &#39;关键词1&#39;,
                &#39;1&#39;: //...
                //...
                
            }
        },
        &#39;1&#39;:{
            //...与上面格式相同
        },
        //...
    }
}
    
//失败时：
{
    &#39;state&#39;: &#39;failed&#39;,
    &#39;description&#39;: &#39;....&#39;
}
</code></pre>
<p>&nbsp;</p>
</li>

</ul>
<h3>/content/getArticleById</h3>
<blockquote><p>用于通过文章id获得单篇文章内容</p>
</blockquote>
<ul>
<li><p>输入</p>
<pre><code class='language-json' lang='json'>{
	&#39;articleid&#39;: &#39;文章id&#39;	
}
</code></pre>
<p>&nbsp;</p>
</li>
<li><p>输出</p>
<pre><code class='language-json' lang='json'>{
        &#39;title&#39;: cur_article.ArticleTitle,
        &#39;content&#39;: show_content,
        &#39;keywords&#39;: keywordlist,
        &#39;_Id&#39;:_Id,
        &#39;userId&#39;:userId,
        &#39;articleId&#39;:articleid,
        &#39;imgLinks&#39;: imgLinks_list, 
        &#39;raw_html&#39;:raw_html
    }
// 类似于getFavorArticle中的定义
</code></pre>
<p>&nbsp;</p>
</li>

</ul>
</body>
</html>